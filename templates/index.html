<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>AI Customer Chatbot</title>
<style>
 :root{--bg:#fff;--fg:#000;--panel:#f5f5f5;--accent:#008cff}
 .dark{--bg:#1e1e1e;--fg:#f1f1f1;--panel:#2b2b2b;--accent:#4499ff}
 body{background:var(--bg);color:var(--fg);font-family:system-ui,sans-serif;
      max-width:800px;margin:40px auto;line-height:1.5;transition:.3s}
 h2{display:flex;justify-content:space-between;align-items:center;margin-bottom:18px}
 #chat{background:var(--panel);border:1px solid #555;border-radius:12px;
       height:340px;overflow:auto;padding:18px}
 textarea{width:100%;min-height:60px;max-height:200px;resize:vertical;
          padding:10px;font-size:15px;border:1px solid #555;border-radius:12px;
          background:var(--panel);color:var(--fg)}
 button,select{padding:10px 16px;border:none;border-radius:12px;font-weight:bold;cursor:pointer}
 button{background:var(--accent);color:#fff}
 select{background:var(--panel);color:var(--fg);border:1px solid #555}
 #modeBtn{background:transparent;border:none;font-size:18px;color:var(--accent);cursor:pointer}
 #spinner{display:none;width:48px;height:14px;position:relative;margin-left:12px}
 #spinner div{position:absolute;width:10px;height:10px;border-radius:50%;
              background:var(--accent);animation:bounce .8s infinite}
 #spinner div:nth-child(2){left:16px;animation-delay:.1s}
 #spinner div:nth-child(3){left:32px;animation-delay:.2s}
 @keyframes bounce{0%,80%,100%{transform:scale(0)}40%{transform:scale(1)}}
 .hidden{display:none}
 #adminPanel{background:var(--panel);border:1px dashed var(--accent);
             border-radius:12px;padding:14px;margin-top:24px}
 #adminPanel h3{margin-top:0;font-size:17px}
 #closeAdmin{background:transparent;border:none;font-size:18px;color:var(--accent);cursor:pointer;float:right}
 textarea#instBox{width:100%;min-height:90px;margin-top:8px}
 ul#faqList{list-style:none;padding:0;margin:0}
 ul#faqList li{display:flex;justify-content:space-between;align-items:center;
               background:rgba(0,0,0,.05);padding:6px 10px;margin-top:4px;border-radius:8px}
 ul#faqList button{background:#ff5252;padding:4px 8px;font-size:12px}
</style>
</head>
<body>
<h2><span>AI Customer Chatbot</span><button id="modeBtn">ðŸŒ™</button></h2>

<div id="chat"></div><br>

<textarea id="msg" placeholder="Type a questionâ€¦"></textarea><br>
<div style="display:flex;align-items:center;gap:10px;margin-top:8px">
  <button id="send">Send</button>
  <span id="spinner"><div></div><div></div><div></div></span>
</div>

<button id="adminToggle" style="margin-top:20px;background:var(--panel);color:var(--accent);border:1px solid var(--accent)">
  Admin Panel
</button>

<div id="adminPanel" class="hidden">
  <h3>Admin Panel <button id="closeAdmin">âœ–</button></h3>

  <label>Persona:
    <select id="personaSel"></select>
    <button id="newPersona" style="margin-left:6px">New</button>
    <button id="deletePersona" style="background:#ff5252;margin-left:4px">Delete</button>
  </label>

  <p style="margin:10px 0 4px">Instructions:</p>
  <textarea id="instBox" placeholder="Enter persona textâ€¦"></textarea>
  <button id="savePersona" style="margin-top:6px">Save Persona</button>

  <label style="display:block;margin:18px 0 6px">
    Creativity&nbsp;(temperature):
    <input id="tempSlider" type="range" min="0" max="1" step="0.05" value="0.20"
           style="width:140px;vertical-align:middle">
    <span id="tempVal">0.20</span>
  </label>

  <hr style="margin:20px 0">

  <form id="faqForm" style="margin-bottom:14px">
    <label>Upload docs (.txt, .pdf, .docx):
      <input type="file" id="faqFiles" accept=".txt,.pdf,.doc,.docx" multiple>
    </label>
    <button type="submit">Upload</button>
  </form>

  <ul id="faqList"></ul>

  <button id="clearBtn" style="background:#ff5252;margin-top:14px">Clear Conversation Only</button>
</div>

<script src="{{ url_for('static', filename='chat.js') }}"></script>
</body>
</html>
